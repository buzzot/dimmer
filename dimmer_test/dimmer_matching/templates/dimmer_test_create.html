<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimmer Test for {{ luminaire.product_name }}</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">
    <h1 class="text-center mb-4">Dimmer Test for {{ luminaire.product_name }}</h1>

    <form method="POST">
        {% csrf_token %}

        <input type="hidden" name="luminaire_production_date" value="{{ luminaire_production_date }}">
        <input type="hidden" name="luminaire" value="{{ luminaire.id }}">

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Dimmer</th>
                    <th>Brand</th>
                    <th>Wattage</th>
                    <th>Number of Luminaries</th>
                    <th>Max Lux</th>
                    <th>Min Lux</th>
                    <th>Visual Flicker</th>
                    <th>Ghosting</th>
                    <th>Turnon Time</th>
                    <th>Popon Light</th>
                    <th>Popcorn</th>
                    <th>Dimmer Noise</th>
                    <th>Fixture Noise</th>
                    <th>Breaker Noise</th>
                    <th>Compatibility Status</th>
                </tr>
            </thead>
            <tbody>
                {% for dimmer_test in dimmer_tests %}
                <tr>
                    <td>{{ dimmer_test.dimmer.model }}</td>
                    <td>{{ dimmer_test.brand }}</td>
                    <td>{{ dimmer_test.wattage }}</td>
                    <td>
                        <input type="number" name="number_of_luminaries" value="{{ dimmer_test.number_of_luminaries }}" class="form-control">
                    </td>
                    <td>{{ dimmer_test.max_lux }}</td>
                    <td>{{ dimmer_test.min_lux }}</td>
                    <td><input type="checkbox" name="visual_flicker" {% if dimmer_test.visual_flicker %}checked{% endif %}></td>
                    <td><input type="checkbox" name="ghosting" {% if dimmer_test.ghosting %}checked{% endif %}></td>
                    <td><input type="checkbox" name="turnon_time" {% if dimmer_test.turnon_time %}checked{% endif %}></td>
                    <td><input type="checkbox" name="popon_light" {% if dimmer_test.popon_light %}checked{% endif %}></td>
                    <td><input type="checkbox" name="popcorn" {% if dimmer_test.popcorn %}checked{% endif %}></td>
                    <td><input type="checkbox" name="dimmer_noise" {% if dimmer_test.dimmer_noise %}checked{% endif %}></td>
                    <td><input type="checkbox" name="fixture_noise" {% if dimmer_test.fixture_noise %}checked{% endif %}></td>
                    <td><input type="checkbox" name="breaker_noise" {% if dimmer_test.breaker_noise %}checked{% endif %}></td>
                    <td>
                        {% if dimmer_test.visual_flicker and dimmer_test.ghosting and dimmer_test.turnon_time and dimmer_test.popon_light and dimmer_test.popcorn and dimmer_test.dimmer_noise and dimmer_test.fixture_noise and dimmer_test.breaker_noise %}
                            Passed
                        {% else %}
                            Failed
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <button type="submit" class="btn btn-primary">Submit Test</button>
    </form>
</div>

</body>
</html>
